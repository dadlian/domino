<div id='game-screen'>
  <jn-player [player]='game.players[(viewPoint + 2) % 4]' [ngClass]="{active:game.getActivePlayer() == game.players[(viewPoint + 2) % 4]}" position="top"></jn-player>
  <jn-player [player]='game.players[(viewPoint+3) % 4]' [ngClass]="{active:game.getActivePlayer() == game.players[(viewPoint + 3) % 4]}" position="left"></jn-player>
  <jn-board [board]="game.board"></jn-board>
  <jn-player [player]='game.players[(viewPoint+1) % 4]' [ngClass]="{active:game.getActivePlayer() == game.players[(viewPoint + 1) % 4]}" position="right"></jn-player>
  <div *ngIf="!game.isWatching()" class='status-dial'>
    <div *ngIf="!myTurn()" class='status'>
      <span>Waiting for {{game.getActivePlayer()?.name}}</span>
    </div>
    <div *ngIf="myTurn() && game.canEndTurn()" class='status active' (click)="pass()">
      <img src='assets/knock.png' />
    </div>
    <div *ngIf="myTurn() && !game.canEndTurn()" class='status active'>
      <div class='play' (click)="playLeft()" [ngClass]="{active: canPlayLeft()}"><img src='assets/left-arrow.png' /></div>
      <div class='border'></div>
      <div class='play' (click)="playRight()" [ngClass]="{active: canPlayRight()}"><img src='assets/right-arrow.png' /></div>
    </div>
  </div>
  <div class='active-player'>
    <div class='hand'>
      <jn-domino *ngFor="let domino of game.players[viewPoint]?.hand" [domino]="domino" (click)="selectDomino(domino)" [ngClass]="{'active':domino == activeDomino}"></jn-domino>
    </div>
    <jn-player [player]='game.players[viewPoint]' [ngClass]="{active:game.getActivePlayer() == game.players[viewPoint]}" position="bottom"></jn-player>
  </div>
</div>
<jn-modal #joinModal [hidden]="game.seatsAvailable() == 0">
  <h1>Enter Your Name</h1>
  <input [(ngModel)]="player.name" type='text' />
  <div class='button-panel'>
    <jn-button (click)="join()" label="Join"></jn-button>
  </div>
</jn-modal>
<jn-modal #statusModal>
  <h1 *ngIf="game.status == 'Pending' && !game.isMultiplayer()">Game Ready</h1>
  <h1 *ngIf="game.status == 'Pending' && game.isMultiplayer()">Waiting for Players</h1>
  <h1 *ngIf="game.status == 'Intermission' || game.status == 'Completed'">{{game.isShut()?"Game Shut - ":""}}{{game.getActivePlayer().name}} Wins!</h1>
  <h1 *ngIf="game.status == 'Drawn'">Game Push</h1>
  <div *ngIf="game.status == 'Pending' && game.isMultiplayer()">Game Code: {{game.code}}</div>
  <div *ngIf="(game.status == 'Drawn' || game.status == 'Intermission') && game.isMultiplayer()">Game will resume in {{timer}}</div>
  <div class='button-panel'>
    <jn-button *ngIf="game.status == 'Pending' && !game.isMultiplayer()" (click)="game.start()" label="Start Now"></jn-button>
    <jn-button *ngIf="(game.status == 'Drawn' || game.status == 'Intermission') && !game.isMultiplayer()" (click)="game.start()" label="Continue"></jn-button>
    <jn-button *ngIf="game.status == 'Completed' || game.status == 'Victory'" (click)="mainMenu()" label="Main Menu"></jn-button>
  </div>
</jn-modal>
<jn-summary [game]="game"></jn-summary>
